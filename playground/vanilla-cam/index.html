<!DOCTYPE html>
<html>
<head>
    <title>Camera Feeds with Capabilities</title>
    <style>
        video {
            width: 320px;
            height: 240px;
            margin: 10px;
        }
    </style>
</head>
<body>
    <h2>Camera Feeds</h2>
    <div id="cameraFeeds"></div>

    <script>
        async function getCameraFeeds() {
            try {
                const devices = await navigator.mediaDevices.enumerateDevices();
                const videoDevices = devices.filter(device => device.kind === 'videoinput');
                const cameraFeedsDiv = document.getElementById('cameraFeeds');

                for (const device of videoDevices) {
                    const videoElement = document.createElement('video');
                    videoElement.autoplay = true;
                    cameraFeedsDiv.appendChild(videoElement);

                    const worker = new Worker('camera-worker.js');
                    worker.postMessage({ deviceId: device.deviceId });

                    worker.addEventListener('message', (event) => {
                        const { deviceId, maxResolution, settings } = event.data;
                        const stream = new MediaStream([event.data.track]);
                        videoElement.srcObject = stream;
                // Create a caption element for the video
                const caption = document.createElement('div');
                        caption.textContent = `Camera Capabilities: Width: ${maxResolution.width}, Height: ${maxResolution.height}, Frame Rate: ${settings.frameRate} fps`;
                videoElement.parentNode.insertBefore(caption, videoElement.nextSibling);
                    });
            }
            } catch (e) {
                console.error('Error accessing camera feeds.', e);
        }
        }

        window.onload = getCameraFeeds;
    </script>
</body>
</html>